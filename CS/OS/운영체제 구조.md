# 운영체제 구조

운영체제는 사용자에게 편리한 인터페이스를 제공하고, 컴퓨터의 자원을 관리하는 소프트웨어이다.

- 자원 관리
- 자원 보호
- 하드웨어 인터페이스 제공
- 사용자 인터페이스 제공



## 커널(Kernel)과 인터페이스

**커널**은 프로세스 관리, 메모리 관리, 저장장치 관리와 같은 운영체제의 핵심 기능들을 묶어놓은 것 이다.

**인터페이스**는 사용자와 커널 사이에서 명령과 결과를 전달하는 부분이다.



## 시스템 호출(System Call), 디바이스 드라이버

**시스템 호출**은 사용자나 응용프로그램이 컴퓨터 자원에 커널을 통해 접근할 떄 사용하는 인터페이스.

응용프로그램이나 사용자가 컴퓨터의 자원에 직접 접근하는 경우 같은 메모리를 두 프로그램이 사용하는 등 원하지 않는 오류가 발생할 수 있다. 그래서 운영체제는 **시스템 호출**을 통해 커널에 명령을 전달하고, 커널이 자원을 관리하여 이런 오류를 방지할 수 있다.



**디바이스 드라이버**는 커널이 하드웨어를 제어하기 위해 사용하는 인터페이스이다. 마우스, 키보드에 사용되는 간단한 드라이버는 커널에 내장되어있기도 한다. 따라서 커널이 자체적으로 가지고 있는 디바이스 드라이버도 있고, 하드웨어 제작자가 별도로 제공하는 디바이스 드라이버도 있다.



## 커널의 구성

커널은 

- 메모리 관리
- 프로세스 관리
- 파일시스템 관리
- 입출력 관리
- 프로세스간 통신(IPC, Inter-Process Communication) 관리

등의 일을 주로 처리한다.

이런 기능들을 어떻게 구현하는가에 따라 

1. 단일형 구조
2. 계층형 구조
3. 마이크로 구조

로 나뉘게 된다.



### 1. 단일형 구조

단일형 구조 커널은 초창기의 운영체제 구조이다. 커널의 핵심기능이 모듈로 구분되어있지 않고 하나로 구성되어있다.

- 장점
  - 모듈간 통신비용이 줄어들어 효율적으로 작동할 수 있다.
- 단점
  - 모든 모듈이 하나로 묶여있어 버그를 처리하기 힘들다.
  - 다양한 환경에 적용하기 힘들다. 수정이 힘듬
  - 현대의 운영체제는 크고 복잡하므로 구현하기가 힘들다



### 2. 계층형 구조

계층형 구조 커널은 비슷한 기능의 모듈을 묶어서 계층화하고, 계층간의 통신으로 운영체제를 구현하는 구조이다.  Windows 등 대부분의 운영체제의 구조이다. 

계층형 구조의 경우 단일형 구조 보다 디버깅이 쉽다.



### 3. 마이크로 구조 

마이크로 구조 커널은 프로세스 관리, 메모리 관리, 프로세스 간 통신 관리 등 기본적인 기능만 제공한다. 각 모듈은 세분화되어있고 모듈간 정보교환은 프로세스 간 통신으로 이루어진다. Mac OS X, iOS의 커널로 사용되었다.

각 모듈은 독립적으로 작동하기 때문에 한 모듈이 실패하더라고 운영체제가 멈추지 않는다. 

